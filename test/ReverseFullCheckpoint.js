const { expect } = require("chai");
const { ethers } = require("hardhat");
const {
  loadFixture,
} = require("@nomicfoundation/hardhat-toolbox/network-helpers");
const {
  getGenesis,
  hex2Arr,
  blockToHash,
  hash,
  encoded,
  getSigs,
  composeAndSignBlock,
  createValidators,
} = require("./libraries/Utils");

describe("reverse full checkpoint", () => {
  const genesis =
    "0xf90c1aa05cc1f1b6f2608c23816562ac2b959cc787593045b8a955c0275dfd91c21969e9a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347940000000000000000000000000000000000000000a022c8813d7f802f94d3a279515a032e0da9d6430dda6a4512cb4872852ab7a84aa0c4e1c95bc0f6a7a478fc5319722dc984fd0d784a9ae692e6ffd88adb8843e44fa0bcd2a51669cdca54e5f28517bcd09ca95007951a7d7ec181cb3f361f783cde4ab901000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000065836bf0d0841908b10080846489d87fb90845d8830200008358444389676f312e31342e3135856c696e75780000000000000002e98d4800a1369868aff80d0c82b0c668108ac309be15344bf20d7207d87dd41b5b9a6ea7c41f760ef0bdd3d485d84fb46fd20c88b3f9d3ed5e03731362c3a7752c0059f663af89f73b17f7b8642c6d14f375e18a878abb4b713328e392abce98f07bfd1987873cc0ad97599d5f7b80602bfa942b52e4391997d2fca748a251c7dc12216cccd4532adf72e81de985a7037fe83cf0c938b498b4ba7de02d890e21196cccb5b588a6fea44c23c6e156d7711c30772150dd6f5c8f2b078a2a6df0538e2ad69661fb9d2432da278eae64e310382744581fc1f2fd36674524edeba8b4e89329a86a41c940d99b55085164f125c0f3009282bb10114229787df2b39f9cfcb8232aee05a4089dd483a2cbfc0388e5a4069289c8482ef96e7e896a8e4df917e90753249526a23b974c2fa91ce4c5f072b0a5bee07955124f259d8bf9bb311bdf9066246e68559816e7f636435867f824ef31d6d14124ba0f54df91e1e5812e3d76a35d0db631d6f7553bf0a9ad038a84f3edc1d694e93a1d11320b183a4d5d9cf5e2fc9f5b9ce7e8df5ab0d11032606c74a18c3e97fa0e87d2e64096852676740f33f5430cc4430168a672a7a447cd8f9753840b3d3880873e90db6a3fc103d08a79a78da145c8dd503a325916f342fbdbd3b890442b668c6a1d8872423ea65e96d70ef812c87beb85ce6d4b017815dc26442a44a6fc20f5b8dfa8b304d7137581f7e6bef345b2277d51d3a79f2b862bb4061d2c7689aa747e47318441696e9ae962633c16e04d53935272639d492e4a95b058af0700743c623497969ed8f877f44a463178f69e99a9ca55d589bf5a52cfbda21e625058dfe24ef6b537b5bc47116a45f0428da182fa52e78df27ca83be8716a77882da63a8dac227dac537fc89618edae86950e12687a612e15c4786b8453889bdf5a2b4e73164a350b05828e178ecd8e0954b337ae16f0d2503035a135854339129311a9aa55dd80e54c9a055fb9e4707e315f94dc3e3de7d258f319405ebc54d6af94051eba88f72faed209fe5d526a911c446536e28034f0d6ab7fd6c3e6a6b460b64be79975292f39d4143dd2024d11ee1040ff6965556e29fa531dbfa09ea0b86aca0019eaa5b66a3c21fc43d3a83605b6c1059fbf643fad3610836a8a9bda9e07f06d865009cae6bc49799132314d73898cc3c5beca5841306b26fdb4e30411392a6a74826141342a4dc33a1045cefa4182b6212ec0317720793aa90b37f690a4b30d51b393b7b25ba4d27bab2893881f5bd4818f7ba7e37eb88e28b4d7507bc30fbeb7208192d1474b5f87ffbc056de43c117e74c953fd114917049df193ff41183f5c7dcc7b819ae84bb23b6b7b36ad5c4c24081cd4198ba885888c073313b36cf03cf1f739f39443551ff12bbe8bb6ec97227cabeea13bc95488afce99fd798c598c16ecad3a93a2bcb3da3f8568d1ad91a83233af8d993351c0e2db739f9bcbfdeda94d73b50b16d39344e5fbb404ada5c610ef621404b5b8ecf4f6259c2dfc7c4e76865826559dd3de57044d2a87b6689cb0f80ac5a82dcf2e1ea59f0342f05c0205e5d89da7d94647c13e365e7853830f2135c70c6e0252a019e95cf81af68c7d6ee555fc43ba235d923fdea242960b7ca1937e826bda6c397df74d9f9ab01aa533166516f1e8828b5cbb8fc3fdfa5ec9a7548ea89af636787499e81362e815e36f28763eac120babebf5a6cbe6113780cbe489e3eb0db882381aebad378a4029f19ad548de4c77cfa8acdda4e77f5eae1662eeec3e17cc34e69f90b8bf59bb1a104a30aeecdc584921a3f2a056cb10f543ea59f8712ec4af81190100d82f41ad2c95898195c7a47dc59115b4b6c967331fc8ac25c217bbccf41ff3e093aaa0bb5ec85408683795da2f604a5c0464868eabfcb6be323be86be3a2027a3a2300d974e01b7cd036d5bf44f8461f28d92035a48a359d16c0ccf70b065fbfc2405e700adda95c0074fd23c967006e8f3230c03e80173d064c3c531993fae8b4d26a58b53e35c1981f17a3910184229a15720785d9b21b1cf614c4aeb81f04ea2e64472d641ccc255579eb020e42c66573a4140a602aecf8a309bea2b2d177a5e483c9de8a53efee40b5fe7709bf5df8d489d0c85fa7cb708982e7fa6d25fb2d9d5683b760f32d739882cc9e345ee1af902b2050cf2323f0e5a3f490248fd140ec37a498c6e70af60078076f9bc03cc89dcdd98213654ca7b02faa29304f33fe7f13fbd235bcda489a1b4304f49aafaec938c7adc48539470624db62b4dd36639ef98d3fc58faf6637674bd9809fddae1c3af791ea6b606bc5638a58bccdde5e152cde58a9d66c8cb5dff6e56faa539f7e3b97cccc62df459d6eeb1d9ceab66d345a26f87539238d72f4e1f9c75ce33e568d8fa3ace90497ee0c60dc921ee2564404fa114b050fe0924ce63518ef4882a6b3e569b1a1121011f5ffe17da1c9f26d9940963740e57257f763c132b82d8d4acc924fac41dffbbea6e6f9b461be5163b04cdccd27d0ff91e007e00836e94daf039d19c85301421b91d326aef7878e725ae99d6a75ddbaabde90c8e6805b4c09c6ace40a6eecd75ddf42695b955a7a827b24833d256f8d7aa7ecd8b40edba44083f97bf5df2a5009115ef6507bef2307a809183154b1f00ef231a25bf9013ccbc9efa69a1a0b87b49884255e30cc2e27082b36550ef3cb1e42ce09cc1b59111d017f848aa929c8ea84fa58562b39fc3125f567277dd4c04fcfa3d75f5ffc087e2622b02b0bb78713e872c02796ef64c8f1fd347f23c20b5e1256c1885bcece4786e151fe05fd63783e43070be1a305cd21013b659823e335cafb7659bb01589776211a5b0a00f19eadb1964609f11f0368fed01457792da39565c4f08e173a6678f9038b687fada03ff9da67860fc0a5b8590ccb3e3ba2dcc800a00000000000000000000000000000000000000000000000000000000000000000880000000000000000b901940000383500003130000000340000353100003939000031390000003200003332000000360000323300003132000032370000323400003436000036370000353900003935000038340000393200003431000036390000383700003631000035300000363200003134000000300000363400003633000031380000343200003131000033380000393100003538000031330000363500003135000038360000363600003439000035330000393800003831000035350000333300003934000033340000363800003738000038390000343800003733000039360000323600003734000034340000323000000039000033310000353400003735000034350000343000000031000038320000393000003736000038300000383800003937000032390000373000313030000000370000333600003537000033300000343300000035000000380000373900003536000037370000333700003136000036300000383300003532000000330000323800003335000031370000373100003437000033390000323100003235000037320000323200003933b84116764d93a3f2fe5b9ea07a271dee366bad642281f0fe056d79144098ca90e59316b51bf87b09343329e874666b75a51c2f5c327bdcbb0b050b6fad052fd606b90180";

  const block7074002Encoded =
    "0xf91590a0e273aa84aef15047fdc940dbf2ff2115bb87e79871831783cde8a3ab935cb335a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347941362c3a7752c0059f663af89f73b17f7b8642c6da0cf56fe516a2865c7c6c30ec03f4881d3340113f19fed1b398f57545ff091c783a0db0963d947d6e6c89ace1d6a48899af043dc592ce629deaebe8f9a0a55dec507a0a3c7f7e4c009555328097961db7035cb8a2a3eae2d89195a00c58a1cdcaaa6e0b901000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000080000000000000000000000002000000000000000400000000000000000000000000000000000000000000000000000000000000001836bf0d2841908b10080846489d892b9135102f9134d03f91349e6a0e273aa84aef15047fdc940dbf2ff2115bb87e79871831783cde8a3ab935cb33501836bf0d1f9131bb84172b2d0e4fb54a328f7744335acd43b0ec97d8822ed777a1639bdd24af974be1b4dcbb3421b0388705fc6be0ef85ba61970942e93ede14393aa0ad06aacbaa53b01b8411cf55abeaac07950fa107c63d90dbdcbb33e85d4b15035c9b67b67e210e9fe41389893001cf000058febe732f0ec80d47213ba32adb4cf94abc3768c8ce8d1ee00b841b3c9f56e9926b3156a9dc1afd5231b2f87f93e3a04df3ed6c1b136098c3a2ef656a538f62d55e258e82b7f72652e51027640b61290b8e81f2dc1196b72b4bce400b84113d567a0777505e19e8ed5b1ce8f41f4182f836f9249d665662017a72f08adc50a0add7302a0db241c0366974971e4997098d3760c3aba516c19b0c6c2edc12f01b841a8cafaa354e5d6b6c56d626363a608ef99cbe4c62e54942935b65c2283623c6459706ff7ed0e15018975d61c22420dcf2a29d4c4982083805fe0e81635a4c60e01b84192050e0a0d7f9b6483a335c67c92260258a9dabb860428380967d54693c7679d581a1f86dba0becc5b878bfabacc3ed6ba98f4d33f8acdb39b0b39680a1439b301b841050ca60c9862bcaf96557bdf0dd83495ece248df6ddf86d9cc621fc4460c74b43108c856abeef82ecc1e50e2c1f2f78b6c100ca19f305a7eea84e0d6165a1dd400b8414d99b5c6a8b88dbeee3123afc0f995ce851b76c554d7d631b56e58742e776b416ddfab1da0e21706e963370676e3110c19e29c202f8cc802883e811136cc859e00b841a0eea4328319ed29b80e71d9b4aa9724f180d7795bf4eea4f06c211d1215b09606eee78ed012796df2aae9021366c4975c4a51b9737cdbbd9b8c98418068036300b841a7659d35b62b02b807bbccdf4821142f183836e5010765136ce399d7500ac00334fdcce61c0ad2114965cdfa6b3e25370605abf5fb627198bbf4816d71627e6401b8410349ea407ac31278e3d0258d6efcfcb8304f02af77e510b425a9f24003c1c2020cd3ad87942a79aae4794b9b2060875c6278d326c6014108c9b94c05e386cc1a01b841894e90dc634b793fee07ab95c4a9aad9aa3b0429fb41d85efaff3bf820dc6b3c20327757e904121033493656caf59b85895f85b4115f021e4966d2215b51c3cc00b8415266f8ea182df03df9d5a18712e01e727422c7417381521aa3bc6be2d0cee63c0e171619e0b517429d036b96a8a555ca179a38e2eadd8c974dd8481e131193f101b8419282558d9aad177c708117f3690c8d55d0c673015a6f6a5eec4b93080c4c49cb686f3d849c8107260fdf7463f4880a656309ed1226ec3cdbdd0b652d8e2e519300b8416d10c5fe0097d91119cb8123b907b963835dd4ddec3b0229a74ea9be33ab19091d34fcaa26e14a3134579f8cc192f19a2c50f6cbaf1170a369da022e275971a200b84107945d9223ef2b9c0d074ca8a97d5c04ac87eed8c32cdaa409bc6299c6a5101f06e32915b57d6bcca638d77bceebc7ba265b78d9f4f0b20630fc36c615cb3dea00b841abab2205e08e296f4077fdc0408af9d25833f6964561e03338b5ed26be0720ff523d7a5f42e849c81c182ee83609ad6c15297091343bb1d243e7f7f87f17433f01b8413afba7af7727a1153e3e2db07f339dd4d3eeeb92806e7ff4b69d90ed7e2aa45a03539e5b3586fc7aee030eafd9e0b74100a31b9dcb512282f83c51da3091470c01b84145eeeea8b239cd2707276828a56ec6f87a4977cb85f4dd5cf71ec6f3f07908611787e4718b952dd05892de02d685228b6f88dbba42e8c927c1f8a3ed6c0cc6da00b84171332445b67c6fc50bf73cdbe32ef86e6ae6c08b19639be2b46ca9a81163b1664163ca6929cc03009d8fa20a3544f8c20ae2782f996290c17d8101697d6bc85e00b8411aaa8fd3fea149d8bb3232e1dcf84f3bc24ec53d64e21a61f489890a5b331e435314f4b92219169123554c63d3bc5e64b27fe18f19245b5d0cd003ec21de925e01b841f82b9dcebe44451fe5061f2d211455bd36bf8aa9c26871e619009558d397b7934adae8a3c589327791e2c0e2de42c2c134ef871c890839261aafbb3f864628c401b841693dd43154eb2269ca79fdb509c4b31604cdeb3b5bc1999c6f5cab69ce2d2efd323a7c445b535544cc8a7c3a1febf350d912b65bd59105f35ac599cf2f805e6301b841f8db4a6fa59d19273e239713ecfb9f59fc2d806315f090aac3675369dc9c97d016a184ecfcc9095a8c7f0c50facc2f61a3426285c885a0d5b6bcfb33484b7e8f00b84111b14832cbed2bd933015f3b69361dc3592ff519e61bb3c6d6fb6e5e06e6b7557ed2d940e2a2cc3617339a9a45fd408397cd923372bb47eb79710103552b367c00b841d2ff983786a213967eb12de9b796036f027a46ade36e72e2500d225b51e5eae246954756cf00179cecfa18760923a7922d0b7aa8686a7e54c23aa827d9413f0f00b8412ef75c514f5b338bbab732c2e9097e503d11f376f7614c2cf45c57d081b08ed85a834b09369d9678b7664e5215eb059d22fe71853aacd416e9bdd69935007fba00b841436e6ac5a9c4b28d3b3e086449f15096cbd08c0f07962847342ff913a505640827f9a972b5eeccb72b1dec55d6cb9fd4f001873ee87d5e48982ac09b45c43bdd00b84133f42064021947d9d864f936b97bf7d4b3f7de6554c1af397c8ecb370983357b077fe036c576afb3f59d438e00d3c34bd9eac584a3d16c09c51ae953d7171f0e00b841a5b6d6f59c967d291a020773233e268e948ceeec9853d9b9eeb7aa84e26c8c193e7c6fe23b82dbb28c8b279ca67a5d3c49980ed04e97bd3b67a3d035231fa4a801b8411ee0c4b57df49a11d6e01f1c67df203e434470eb5fe8b58d1e3e51b1124ccceb25e4d40462a28e5babb0204af5ab5e105c0cc2c0b9e2a7f642423a24f9372b4500b84113f6967e9c9a1e0fcf4c3f3e26351be7faf1f4fa2dcb576944c816781124186b7f5c7845665557e8c5efee50c60abd95adc98db2af8dbe1e59db552f9f554d8500b8415c70b5f4a33cc8dba735d3b9f7a63a962468bdff9284b532d19f630015b63cb2161cf669107626b2084d65a10808b073a2aa9f33e5feaf04ceb64ebd311f2e0b01b841d77bceef354ac2e3d4f44fb1859644092a3f2b31732aad0d49265027148f6b44686b5d4e27c010374f47b19f9103a2e54b7e00467e35dc76185dcb702405a72a01b841d6f50373cbc77abbc32738f40a1088f90f05b665f5150f45f78547e0ab1d868125f5793c03f0dddf5b9ff0c090ce100b12e95c4c7dff90e649b9c98248b43fa200b841f6e3a383f7588ad2f31c61ac5b6c80d050c38a198b38ce9c89f1a6710ced73b9110d6902ac3c9b590a3a66f29e6be85c2bfa0fe0e584042dafe255210f496bad01b841b041bd6540752232ee7b569cdcd8185bc3fce271c07b5499dc7ade8dcd6fca666254a9adc82034b84aa25382030335168a4a7951ecde2f553d20ffe8ee14821a00b84180613b087a7a2d59f9f2b4a32f781ce0266c2dd64f40adedf7f612536cb7d32b729391d47c070db0496fb6111f0a485b9e6278b5678e4e99ee85571fdb42cfde01b8415ca8cb93131f2f77d71c86c4cd478bdd1b41552305a862b87b77f36802c0e0554c5ce822feff07c56e0b2fb7a52fb9cfec254872d0a4fba5942792852db4765401b8412ca293e6de39dc9011ff89c507bae9cc2c5e173fe23aa5bf4541d7d809bdd3c45970ca8a684c41bbf1e90bf4f724dbc504606de30360e69d7d8e9f5743f41e1101b841c095dcaf4637ec7c2bc581145d9ab85938439312d1f26f92d00df1ded998e7393aac166c2f3ce34409c78534bfca756d794576219138dd3f9cd53842be50534b01b8418adc5694e40f4551cac386d199d781c7de3f9d660867f268a68c8ed595e158a53923e15ae45185314361229cd35feb4727f9387d69e8851af5a721e5da311a2800b84178e4f8b08dff7b4e103f9ea8d4d79bd3edbdd64d01e1bbd14b0c977cc7b9614b4b8eafe9a362df92088c9af755ef05b78b96021d7ba238905d66b886f3b794de01b841330fc2f88e9bb0ed9543f20ff88ceecb1e046c79e07fbc8ea1c647885af7488c680cd9523a8112f661afcf1d67d820f932e6b7c95b20f4d26df9aaafaf0a5f3200b841281d4a89ca553a3e9e5b2dfc12b658de0fb121e58a9a7af39ae9bcdc78e2b47e10ca1d9db07e2d2052287266022b323570bb75a7de5b619a43119776d93a0e1800b841968fa35b9775e6fe72e04cc8b57525f22d3cf3bad4ea8cecc8b412cf05048b154f725c430262a99129de119643e42ede57842b54e69894fe23c12f034529133401b8419f284a2f5f1827e6c757f5d1b24085eb4d51bf9ddeb05d1f70513ab3cd06347813acc03dcd55461a6b0b111bd6cff694c46feee9d9712795175952d849e1afcf00b8413f34f754f0ba3eae84ec4e080a77a73ce2c892b921d7c3c4c0123e3993cd746d768f7b6e913c3205b09c2824e298293f58e0b6821ebe09285712fc71147b329801b8414165482c2e102a078874d86221facd9f277d54094b0cefd0295152666050d3cd1044def22a9e262f98a002ec43201de9d1404f1410d029c052c761a06c0b452901b8418a0bd52ea7a0017aa396580b3edb0711586a07246943dcc6ad45d7573be6e48f2af39eb72e844d9ffced2d44b3eeea9706dbbbe8b96a1d22a8522773ec77167100b84184b63d1896afcd2c3dc88201fa2e71fec1cc636773f2ccd569703fc3326269d76efb566bc8983fd1f6836f9432f3686dd5928b63ab2a4fd71cb9d28a996cfa1100b8411d2225b0611019372a3ab8a3569373cc190585938bfd58e8687bd07779479f605c526d9a51fbca7ca8bba315981e4a37acee6015d958e54acae8622b4e088a7001b84196a30678a4c3ac0e0db431880fb6a5095d231e3f052304171f28898d9bc3972c06a7375e2554b719a2cb57fea7af2492f349f7f3090a9e7fae9e4b89bb46672d00b841cb9c2a6890e6b40c8ca86132c6a331305efd04b0d38daf2b75d0ce3a69160a0c671f5bea27521ab84a73f038208782e7ebf731da4986337beb0d2e0f8e3d560301b841715ce6c9d0128b651c089d8bb588063acdb79fa819cc19f6ce585391785418974e4f664c2562fa28d58c06bd21ac3bc21570cd8c696af71e8513be1f5865a3c500b8417b8685533e2866f06448d05c796961c16dc45ef74139b515d823a1400d0534992c82975e1dda7357a8c0b2b26ba1ffb3679635494cd411222b158c26f76d9ebf00b8415fffbfe0062a04102f72777ca3e36697d6cb9a838fc98736fa1bb010c9df8c1e2e0106b6932e699945969b7ca43dd24b54e5d8a171f2403b5b5cd53287853b7201b84173caf542ead3b863e7be03ce9ae09afe127d500450c12d00e9b901e6dab0cc2e395daab97cb5dfaefdd33e5f8da545b968f83c7167f056fd6ceab61d2cbae96c01b841206e9b271fc4727f60f80c240890af8b2841de3a1bb87253e53ecf6cb584dc5e3f090520e16095607f24964c51a0a214b1af69a7585ce9ca57abc6a4405a67df01b841a232eed3fac0fe07ce42a54112c2c4ce960b7a447a2f395447f66be85051dc0d2227e88e14a3201405248084e59280919aca4dc86c8046d42a8cc770401d709900b841075fd7316d12c8b1d2148dc43b0d72b1eab67bb091acc06a3750761ab2e0e4295dbff82d4ecc8f76239f25a3d7a2116c3207c982b2446a3d601604a3384a2ea600b841d60e51c9ce7191c2bb5a4f17509d1da1727169c492c2b45c5f6a5097c654c21a1862c66e24fab177f190f997fec66444650def205a05a11a929490d17ee4060100b841125aeb7f466243912fb01d37b276a62ce94d59dba80ef6a5845c9d968c253e2f1e4de74b640f2619290e095d5fc90182adc1bfab6b267b5adca5f5d3cb218c6501b841c0c34503b35dda551f031f962da2eed9c2f6c42ff7a54274160d9552edc5a9da66b053abafab8daddce5994496feaf9a9bb8feea773e6bc3f9ac1922871fae2201b841663a64d422e8b3f4d12355c9a7b7773c6d4ce97dec128604f90932be6829bc1067ca2f7aed6da7a05aa79219b597b8d01e45101e8a55a0ca39d846f8c7255c5d01b8412088b5ceeb8d0065ecc37a10df4565b91185156fcbce5e9ea163e0d0431d492e294533a993a3470b97f305cba1d9f25b28e8df49f96a0e83ebba642dc7eefec400b841723bf3f12b5b72986f2e517408f7c58d84eba3a87865bbd3f0064717b977557b054736b395eb06c03b2f454af141bd5e196ce244be7d5412cd22d97dbbf4004100b84130a162adb0cf48d96b7ae30f4a6925af8c8130d9483ac97238aa1244a803cacb3e440483296ad4755ce088e4914b15212fde92c5ccb6806ade724438ac93e1c801b841cd6fb72a4d0d9fcae08bb70ae7109ec4ffb6224331fc2cdbaa631ec3007ecaf837c683e66873839587582e5acaa640408b7a365e97a5fab044a9397157d19a6801b841b52103a3d3ccb255e8bddc7c3114e367722d3dcdab065dcea775505851030a781a46d59d3a9c8f1728a096f8c09e40307292a8ca59a76311d17986b2664e9bd500b841bc60d6c6d252c445b3b2276150370add9e75f44682bc966a3e20092da54745b81524481a9486005c03c618ea83650264b3faefa7def3599668b801712d4306d600b84158315cec754f04a6eee92e9a4894c60a3225469ac459b90adbcff3cd8672fedc5d94e56e7c75073b9c903290cd48d36009fbec77b79121959b50aa0c903d3ba201b841493c22a97c2fb42fe7834480118e1fa8063b209c218e3d00a40d79c7cbc975a72d955b743c9d4d9a863cc836f7586bc06f9a6e2d3e034274314dc769e6b5ab4200836bef0ea0000000000000000000000000000000000000000000000000000000000000000088000000000000000080b841e71d7d0989ce6a6fec55d99af0132906af44b686c8cd37650dec39c5ab9f9c3f6c25e99203bdb251bcafc0591f3d5ae63620206e77d8ccf24da662fd6f1fb6490180";

  const block3Encoded =
    "0xf90379a0042d032a8d2a2e413b7e778f67f63f0314ecce78a56bb8a21e30249ff9048d71a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479410982668af23d3e4b8d26805543618412ac724d4a03a9114857792f2a10b4d04ded4e29cb2371535ed749a7686aa2e9885c6007e25a0aa5c22a6b44642cb26e615b25909c4ce85fa09c6d07be8dd277c16a41913b752a0f1e9711aafd2cc3a654c508ff781ff01ebaf495cc3a80f1ac689b745b2f3c8e7b90100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000103841908b100808464d68e43b9013c02f9013805f90134e3a0042d032a8d2a2e413b7e778f67f63f0314ecce78a56bb8a21e30249ff9048d710402f9010cb84168483ea8067e3432d01a1ed3e401e4373c87bfbc55f8082cf9f2b3d1f402c681480297e1239f13bc9d619789f59f2fbdb1f48fcae327d746094cfacce4a6bb7601b841b329b2b5ca5750dcc45600a63cf36cb633e1ba932e0273c06cf040f62e18d0604391ef2af450c815b895e06000f4e34dcd13ef299d5dcc6e9db6561c13080a4400b841576e03c4ecc1f124fb41218004de36f818bae7e61b6c40a1deb06bf7aa05e1d87cee514d6c36098cde2c6537fb6c556774a4d382dbdeae37b6c676d5d509e1c200b841f354a8eaa22bfd983cb6669974b7de78e229094e315d095646c970a96e3615021de832730b17fa1833b3032d9c25e1b1887418747a845761cf546bd4ba83d5e20180a00000000000000000000000000000000000000000000000000000000000000000880000000000000000b841d1570a04d189780140c9c71120b24edef830c1320fd28a928cd31e88e1b2f3a768967615e887f466d78b57a5bbf54a0750be466f2a90e961acf8bc1203166dff01c0c0c0";
  const block4Encoded =
    "0xf90379a0943df401cff04f6f72268e63e1f2737c7bee3347de6175779af3f0247588c3c5a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347946f3c1d8ba6cc6b6fb6387b0fe5d2d37a822b2614a03a9114857792f2a10b4d04ded4e29cb2371535ed749a7686aa2e9885c6007e25a0774ec1306070d707c45375189ea663a3a74c7c2c03a1727606a73bef6ffe43bfa0bcd2a51669cdca54e5f28517bcd09ca95007951a7d7ec181cb3f361f783cde4ab90100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000104841908b100808464d68e45b9013c02f9013806f90134e3a0943df401cff04f6f72268e63e1f2737c7bee3347de6175779af3f0247588c3c50503f9010cb841af3c37e0578631f766aa0bcb67e451a003da396b1fc10d2b1cadd9f9cd0fe1d2368792de099fed569d6d9623dedde2db871aef9b26f23d0c7419cf57ecfa67f401b84106891a6d4bc73bc4295f9d00b17d62fffbdd34032803c35cc7cbc7eec57b7ca70d236906e9ab55ae61eab0a95a031fc1394c64b06dcdd08be9d298a9c5067f7a00b84166b00fa8f3338824792e82b4e8b31c45f8a0ced6cb163c0399de258b0611173d527558063504fba8745b18dc7179b268afe48f76744cf52bfb4ad78fc9cccd5100b841cb27696ff615ee3b4780bd31db1c67823b8d40389ac4b9e4df7d922f02f712463c4c4f658ae582b3bd8ec8bd1382feabf960353511156aa59fd87da60abc272b0180a00000000000000000000000000000000000000000000000000000000000000000880000000000000000b84147a9f90eae46c16b2b34158606284a62d3bee421fadc28d588cde83a203db6d11d0e549bd6f05bb8341789935faebb2310cbb72a923a083e9e20869eba1833ea01c0c0c0";
  const block5Encoded =
    "0xf90379a05c0edc00bb0dae82277c4018f52af29663fdab3ddd8c3a6b5992b5954a2bc347a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479480f489a673042c2e5f17e5b2a5e49d71bf0611a4a03a9114857792f2a10b4d04ded4e29cb2371535ed749a7686aa2e9885c6007e25a0f8decd77dd41d9af5111633085d026e6d51c46c72df707e341e4e429e148471ea0bcd2a51669cdca54e5f28517bcd09ca95007951a7d7ec181cb3f361f783cde4ab90100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000105841908b100808464d68e47b9013c02f9013807f90134e3a05c0edc00bb0dae82277c4018f52af29663fdab3ddd8c3a6b5992b5954a2bc3470604f9010cb841000d7dc02cf85bd31f296f38cbcac70731da3890fab990918e5d3e6c45ad6666083030dfdbd419ffd285dba33444b4bd8314f2ba790a013379eafca701b2979201b841fbf5be8f55b05e7e25a11c0b9944120bc3493dd8f142423473dc4ad3ead4d45d56c0f58a5cc0762b8e162a66fa571e5a7c91e3161be455d8e3aeebc29657e16901b84122ba8ebd01d3329140b5396168e71d6733656ec3441bf999c0fda45cbe0bd93829a1c24e046ec01953b159389a24762da44f5c50efcef025cf103c4ad024f5d900b841ff2d8e3ff4b02bd745fe260378e435536476f4c48d1934a60cd396c5c12936ed079c0d93d143d1266b0ca9a90ae80f8f424986cde01363bd5305e7dffd653ea90180a00000000000000000000000000000000000000000000000000000000000000000880000000000000000b8413a919aa9491748d75f986e7a20c298ed7c8928f45ea339bb7e994308714a988e794c7d15a8e6f4f95a244d1a1139b092181ea4863a12238cf96c22c63b6912be00c0c0c0";

  let checkpoint;
  let custom;
  let customValidators;
  let customBlock0;
  let customeBlock1;

  const fixture = async () => {
    const factory = await ethers.getContractFactory("ReverseFullCheckpoint");
    const checkpoint = await factory.deploy();
    await checkpoint.init(
      [
        "0x02e98d4800a1369868aff80d0c82b0c668108ac3",
        "0x09be15344bf20d7207d87dd41b5b9a6ea7c41f76",
        "0x0ef0bdd3d485d84fb46fd20c88b3f9d3ed5e0373",
        "0x1362c3a7752c0059f663af89f73b17f7b8642c6d",
        "0x14f375e18a878abb4b713328e392abce98f07bfd",
        "0x1987873cc0ad97599d5f7b80602bfa942b52e439",
        "0x1997d2fca748a251c7dc12216cccd4532adf72e8",
        "0x1de985a7037fe83cf0c938b498b4ba7de02d890e",
        "0x21196cccb5b588a6fea44c23c6e156d7711c3077",
        "0x2150dd6f5c8f2b078a2a6df0538e2ad69661fb9d",
        "0x2432da278eae64e310382744581fc1f2fd366745",
        "0x24edeba8b4e89329a86a41c940d99b55085164f1",
        "0x25c0f3009282bb10114229787df2b39f9cfcb823",
        "0x2aee05a4089dd483a2cbfc0388e5a4069289c848",
        "0x2ef96e7e896a8e4df917e90753249526a23b974c",
        "0x2fa91ce4c5f072b0a5bee07955124f259d8bf9bb",
        "0x311bdf9066246e68559816e7f636435867f824ef",
        "0x31d6d14124ba0f54df91e1e5812e3d76a35d0db6",
        "0x31d6f7553bf0a9ad038a84f3edc1d694e93a1d11",
        "0x320b183a4d5d9cf5e2fc9f5b9ce7e8df5ab0d110",
        "0x32606c74a18c3e97fa0e87d2e64096852676740f",
        "0x33f5430cc4430168a672a7a447cd8f9753840b3d",
        "0x3880873e90db6a3fc103d08a79a78da145c8dd50",
        "0x3a325916f342fbdbd3b890442b668c6a1d887242",
        "0x3ea65e96d70ef812c87beb85ce6d4b017815dc26",
        "0x442a44a6fc20f5b8dfa8b304d7137581f7e6bef3",
        "0x45b2277d51d3a79f2b862bb4061d2c7689aa747e",
        "0x47318441696e9ae962633c16e04d53935272639d",
        "0x492e4a95b058af0700743c623497969ed8f877f4",
        "0x4a463178f69e99a9ca55d589bf5a52cfbda21e62",
        "0x5058dfe24ef6b537b5bc47116a45f0428da182fa",
        "0x52e78df27ca83be8716a77882da63a8dac227dac",
        "0x537fc89618edae86950e12687a612e15c4786b84",
        "0x53889bdf5a2b4e73164a350b05828e178ecd8e09",
        "0x54b337ae16f0d2503035a135854339129311a9aa",
        "0x55dd80e54c9a055fb9e4707e315f94dc3e3de7d2",
        "0x58f319405ebc54d6af94051eba88f72faed209fe",
        "0x5d526a911c446536e28034f0d6ab7fd6c3e6a6b4",
        "0x60b64be79975292f39d4143dd2024d11ee1040ff",
        "0x6965556e29fa531dbfa09ea0b86aca0019eaa5b6",
        "0x6a3c21fc43d3a83605b6c1059fbf643fad361083",
        "0x6a8a9bda9e07f06d865009cae6bc49799132314d",
        "0x73898cc3c5beca5841306b26fdb4e30411392a6a",
        "0x74826141342a4dc33a1045cefa4182b6212ec031",
        "0x7720793aa90b37f690a4b30d51b393b7b25ba4d2",
        "0x7bab2893881f5bd4818f7ba7e37eb88e28b4d750",
        "0x7bc30fbeb7208192d1474b5f87ffbc056de43c11",
        "0x7e74c953fd114917049df193ff41183f5c7dcc7b",
        "0x819ae84bb23b6b7b36ad5c4c24081cd4198ba885",
        "0x888c073313b36cf03cf1f739f39443551ff12bbe",
        "0x8bb6ec97227cabeea13bc95488afce99fd798c59",
        "0x8c16ecad3a93a2bcb3da3f8568d1ad91a83233af",
        "0x8d993351c0e2db739f9bcbfdeda94d73b50b16d3",
        "0x9344e5fbb404ada5c610ef621404b5b8ecf4f625",
        "0x9c2dfc7c4e76865826559dd3de57044d2a87b668",
        "0x9cb0f80ac5a82dcf2e1ea59f0342f05c0205e5d8",
        "0x9da7d94647c13e365e7853830f2135c70c6e0252",
        "0xa019e95cf81af68c7d6ee555fc43ba235d923fde",
        "0xa242960b7ca1937e826bda6c397df74d9f9ab01a",
        "0xa533166516f1e8828b5cbb8fc3fdfa5ec9a7548e",
        "0xa89af636787499e81362e815e36f28763eac120b",
        "0xabebf5a6cbe6113780cbe489e3eb0db882381aeb",
        "0xad378a4029f19ad548de4c77cfa8acdda4e77f5e",
        "0xae1662eeec3e17cc34e69f90b8bf59bb1a104a30",
        "0xaeecdc584921a3f2a056cb10f543ea59f8712ec4",
        "0xaf81190100d82f41ad2c95898195c7a47dc59115",
        "0xb4b6c967331fc8ac25c217bbccf41ff3e093aaa0",
        "0xbb5ec85408683795da2f604a5c0464868eabfcb6",
        "0xbe323be86be3a2027a3a2300d974e01b7cd036d5",
        "0xbf44f8461f28d92035a48a359d16c0ccf70b065f",
        "0xbfc2405e700adda95c0074fd23c967006e8f3230",
        "0xc03e80173d064c3c531993fae8b4d26a58b53e35",
        "0xc1981f17a3910184229a15720785d9b21b1cf614",
        "0xc4aeb81f04ea2e64472d641ccc255579eb020e42",
        "0xc66573a4140a602aecf8a309bea2b2d177a5e483",
        "0xc9de8a53efee40b5fe7709bf5df8d489d0c85fa7",
        "0xcb708982e7fa6d25fb2d9d5683b760f32d739882",
        "0xcc9e345ee1af902b2050cf2323f0e5a3f490248f",
        "0xd140ec37a498c6e70af60078076f9bc03cc89dcd",
        "0xd98213654ca7b02faa29304f33fe7f13fbd235bc",
        "0xda489a1b4304f49aafaec938c7adc48539470624",
        "0xdb62b4dd36639ef98d3fc58faf6637674bd9809f",
        "0xddae1c3af791ea6b606bc5638a58bccdde5e152c",
        "0xde58a9d66c8cb5dff6e56faa539f7e3b97cccc62",
        "0xdf459d6eeb1d9ceab66d345a26f87539238d72f4",
        "0xe1f9c75ce33e568d8fa3ace90497ee0c60dc921e",
        "0xe2564404fa114b050fe0924ce63518ef4882a6b3",
        "0xe569b1a1121011f5ffe17da1c9f26d9940963740",
        "0xe57257f763c132b82d8d4acc924fac41dffbbea6",
        "0xe6f9b461be5163b04cdccd27d0ff91e007e00836",
        "0xe94daf039d19c85301421b91d326aef7878e725a",
        "0xe99d6a75ddbaabde90c8e6805b4c09c6ace40a6e",
        "0xecd75ddf42695b955a7a827b24833d256f8d7aa7",
        "0xecd8b40edba44083f97bf5df2a5009115ef6507b",
        "0xef2307a809183154b1f00ef231a25bf9013ccbc9",
        "0xefa69a1a0b87b49884255e30cc2e27082b36550e",
        "0xf3cb1e42ce09cc1b59111d017f848aa929c8ea84",
        "0xfa58562b39fc3125f567277dd4c04fcfa3d75f5f",
        "0xfc087e2622b02b0bb78713e872c02796ef64c8f1",
        "0xfd347f23c20b5e1256c1885bcece4786e151fe05",
        "0xfd63783e43070be1a305cd21013b659823e335ca",
      ],
      genesis,
      "0xf90a53a0df1eb735dc7de572c13109a8c2377e1f11c131d061c6552bf690dcfa27f9498da01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479409be15344bf20d7207d87dd41b5b9a6ea7c41f76a022c8813d7f802f94d3a279515a032e0da9d6430dda6a4512cb4872852ab7a84aa07c3200267d209f2dfd5a9bdb6577a52662944fe9f3de2ebcbada7612877b411fa0bcd2a51669cdca54e5f28517bcd09ca95007951a7d7ec181cb3f361f783cde4ab901000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000001836bf0d1841908b10080846489d885b002ee01ece6a0df1eb735dc7de572c13109a8c2377e1f11c131d061c6552bf690dcfa27f9498d80836bf0d0c0836bef0ea00000000000000000000000000000000000000000000000000000000000000000880000000000000000b907e402e98d4800a1369868aff80d0c82b0c668108ac309be15344bf20d7207d87dd41b5b9a6ea7c41f760ef0bdd3d485d84fb46fd20c88b3f9d3ed5e03731362c3a7752c0059f663af89f73b17f7b8642c6d14f375e18a878abb4b713328e392abce98f07bfd1987873cc0ad97599d5f7b80602bfa942b52e4391997d2fca748a251c7dc12216cccd4532adf72e81de985a7037fe83cf0c938b498b4ba7de02d890e21196cccb5b588a6fea44c23c6e156d7711c30772150dd6f5c8f2b078a2a6df0538e2ad69661fb9d2432da278eae64e310382744581fc1f2fd36674524edeba8b4e89329a86a41c940d99b55085164f125c0f3009282bb10114229787df2b39f9cfcb8232aee05a4089dd483a2cbfc0388e5a4069289c8482ef96e7e896a8e4df917e90753249526a23b974c2fa91ce4c5f072b0a5bee07955124f259d8bf9bb311bdf9066246e68559816e7f636435867f824ef31d6d14124ba0f54df91e1e5812e3d76a35d0db631d6f7553bf0a9ad038a84f3edc1d694e93a1d11320b183a4d5d9cf5e2fc9f5b9ce7e8df5ab0d11032606c74a18c3e97fa0e87d2e64096852676740f33f5430cc4430168a672a7a447cd8f9753840b3d3880873e90db6a3fc103d08a79a78da145c8dd503a325916f342fbdbd3b890442b668c6a1d8872423ea65e96d70ef812c87beb85ce6d4b017815dc26442a44a6fc20f5b8dfa8b304d7137581f7e6bef345b2277d51d3a79f2b862bb4061d2c7689aa747e47318441696e9ae962633c16e04d53935272639d492e4a95b058af0700743c623497969ed8f877f44a463178f69e99a9ca55d589bf5a52cfbda21e625058dfe24ef6b537b5bc47116a45f0428da182fa52e78df27ca83be8716a77882da63a8dac227dac537fc89618edae86950e12687a612e15c4786b8453889bdf5a2b4e73164a350b05828e178ecd8e0954b337ae16f0d2503035a135854339129311a9aa55dd80e54c9a055fb9e4707e315f94dc3e3de7d258f319405ebc54d6af94051eba88f72faed209fe5d526a911c446536e28034f0d6ab7fd6c3e6a6b460b64be79975292f39d4143dd2024d11ee1040ff6965556e29fa531dbfa09ea0b86aca0019eaa5b66a3c21fc43d3a83605b6c1059fbf643fad3610836a8a9bda9e07f06d865009cae6bc49799132314d73898cc3c5beca5841306b26fdb4e30411392a6a74826141342a4dc33a1045cefa4182b6212ec0317720793aa90b37f690a4b30d51b393b7b25ba4d27bab2893881f5bd4818f7ba7e37eb88e28b4d7507bc30fbeb7208192d1474b5f87ffbc056de43c117e74c953fd114917049df193ff41183f5c7dcc7b819ae84bb23b6b7b36ad5c4c24081cd4198ba885888c073313b36cf03cf1f739f39443551ff12bbe8bb6ec97227cabeea13bc95488afce99fd798c598c16ecad3a93a2bcb3da3f8568d1ad91a83233af8d993351c0e2db739f9bcbfdeda94d73b50b16d39344e5fbb404ada5c610ef621404b5b8ecf4f6259c2dfc7c4e76865826559dd3de57044d2a87b6689cb0f80ac5a82dcf2e1ea59f0342f05c0205e5d89da7d94647c13e365e7853830f2135c70c6e0252a019e95cf81af68c7d6ee555fc43ba235d923fdea242960b7ca1937e826bda6c397df74d9f9ab01aa533166516f1e8828b5cbb8fc3fdfa5ec9a7548ea89af636787499e81362e815e36f28763eac120babebf5a6cbe6113780cbe489e3eb0db882381aebad378a4029f19ad548de4c77cfa8acdda4e77f5eae1662eeec3e17cc34e69f90b8bf59bb1a104a30aeecdc584921a3f2a056cb10f543ea59f8712ec4af81190100d82f41ad2c95898195c7a47dc59115b4b6c967331fc8ac25c217bbccf41ff3e093aaa0bb5ec85408683795da2f604a5c0464868eabfcb6be323be86be3a2027a3a2300d974e01b7cd036d5bf44f8461f28d92035a48a359d16c0ccf70b065fbfc2405e700adda95c0074fd23c967006e8f3230c03e80173d064c3c531993fae8b4d26a58b53e35c1981f17a3910184229a15720785d9b21b1cf614c4aeb81f04ea2e64472d641ccc255579eb020e42c66573a4140a602aecf8a309bea2b2d177a5e483c9de8a53efee40b5fe7709bf5df8d489d0c85fa7cb708982e7fa6d25fb2d9d5683b760f32d739882cc9e345ee1af902b2050cf2323f0e5a3f490248fd140ec37a498c6e70af60078076f9bc03cc89dcdd98213654ca7b02faa29304f33fe7f13fbd235bcda489a1b4304f49aafaec938c7adc48539470624db62b4dd36639ef98d3fc58faf6637674bd9809fddae1c3af791ea6b606bc5638a58bccdde5e152cde58a9d66c8cb5dff6e56faa539f7e3b97cccc62df459d6eeb1d9ceab66d345a26f87539238d72f4e1f9c75ce33e568d8fa3ace90497ee0c60dc921ee2564404fa114b050fe0924ce63518ef4882a6b3e569b1a1121011f5ffe17da1c9f26d9940963740e57257f763c132b82d8d4acc924fac41dffbbea6e6f9b461be5163b04cdccd27d0ff91e007e00836e94daf039d19c85301421b91d326aef7878e725ae99d6a75ddbaabde90c8e6805b4c09c6ace40a6eecd75ddf42695b955a7a827b24833d256f8d7aa7ecd8b40edba44083f97bf5df2a5009115ef6507bef2307a809183154b1f00ef231a25bf9013ccbc9efa69a1a0b87b49884255e30cc2e27082b36550ef3cb1e42ce09cc1b59111d017f848aa929c8ea84fa58562b39fc3125f567277dd4c04fcfa3d75f5ffc087e2622b02b0bb78713e872c02796ef64c8f1fd347f23c20b5e1256c1885bcece4786e151fe05fd63783e43070be1a305cd21013b659823e335cab841c21e66af325a3cfb7d2cd8e69a0faccf9fae45316d26f37f2cdf675eeb84286f559534f8c5cb84381c469668b050c53927109b8cc10ca687f0d3c56e297256850080",
      450,
      900,
      7074000
    );
    const customValidators = createValidators(3);
    const block0 = getGenesis(customValidators);
    const block0Hash = hash(block0);
    const block0Encoded = encoded(block0);
    const [block1, block1Encoded, block1Hash] = composeAndSignBlock(
      1,
      1,
      0,
      block0Hash,
      customValidators,
      2,
      [],
      []
    );

    const custom = await factory.deploy();
    await custom.init(
      customValidators.map((item) => {
        return item.address;
      }),
      block0Encoded,
      block1Encoded,
      5,
      10,
      0
    );
    const customBlock0 = { hash: block0Hash, encoded: block0Encoded };
    const customeBlock1 = { hash: block1Hash, encoded: block1Encoded };

    return {
      checkpoint,
      custom,
      customValidators,
      customBlock0,
      customeBlock1,
    };
  };

  beforeEach("deploy fixture", async () => {
    ({ checkpoint, custom, customValidators, customBlock0, customeBlock1 } =
      await loadFixture(fixture));
  });

  describe("test checkpoint real block data", () => {
    it("should receive new header", async () => {
      await checkpoint.receiveHeader([block7074002Encoded]);

      const block7074002Hash = blockToHash(block7074002Encoded);
      const block7074002Resp = await checkpoint.getHeader(block7074002Hash);
      const latestBlocks = await checkpoint.getLatestBlocks();

      expect(block7074002Resp.finalized).to.eq(false);

      expect(latestBlocks[0].hash).to.eq(block7074002Hash);
    });

    // it("should confirm a received block", async () => {
    //   await checkpoint.receiveHeader([block2Encoded, block3Encoded]);
    //   await checkpoint.receiveHeader([block4Encoded, block5Encoded]);

    //   const block2Hash = blockToHash(block2Encoded);
    //   const block5Hash = blockToHash(block5Encoded);

    //   const block2Resp = await checkpoint.getHeader(block2Hash);
    //   const latestBlocks = await checkpoint.getLatestBlocks();

    //   expect(block2Resp.finalized).to.eq(true);
    //   expect(latestBlocks[0].hash).to.eq(block5Hash);
    //   expect(latestBlocks[1].hash).to.eq(block2Hash);
    // });
    // it("should mainnet num submit", async () => {
    //   await checkpoint.receiveHeader([block2Encoded, block3Encoded]);
    //   await checkpoint.receiveHeader([block4Encoded, block5Encoded]);

    //   const block2Hash = blockToHash(block2Encoded);
    //   const block3Hash = blockToHash(block3Encoded);
    //   const block2Resp = await checkpoint.getHeader(block2Hash);

    //   expect(block2Resp.number).to.eq(2);
    //   expect(block2Resp.roundNum).to.eq(4);
    //   expect(block2Resp.mainnetNum).to.not.eq(-1);
    //   expect(block2Resp.finalized).to.eq(true);
    //   const block3Resp = await checkpoint.getHeader(block3Hash);
    //   expect(block3Resp.mainnetNum).to.eq(-1);
    // });
  });

  //   describe("test checkpoint custom block data", () => {
  //     it("should receive new header", async () => {
  //       const [block2, block2Encoded, block2Hash] = composeAndSignBlock(
  //         2,
  //         2,
  //         1,
  //         customeBlock1["hash"],
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       await custom.receiveHeader([block2Encoded]);

  //       const block2Resp = await custom.getHeader(block2Hash);
  //       const latestBlocks = await custom.getLatestBlocks();

  //       expect(block2Resp.finalized).to.eq(false);

  //       expect(latestBlocks[0].hash).to.eq(block2Hash);
  //     });
  //     it("should confirm a received block", async () => {
  //       const [block2, block2Encoded, block2Hash] = composeAndSignBlock(
  //         2,
  //         2,
  //         1,
  //         customeBlock1["hash"],
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block3, block3Encoded, block3Hash] = composeAndSignBlock(
  //         3,
  //         3,
  //         2,
  //         block2Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block4, block4Encoded, block4Hash] = composeAndSignBlock(
  //         4,
  //         4,
  //         3,
  //         block3Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block5, block5Encoded, block5Hash] = composeAndSignBlock(
  //         5,
  //         5,
  //         4,
  //         block4Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       await custom.receiveHeader([block2Encoded, block3Encoded]);
  //       await custom.receiveHeader([block4Encoded, block5Encoded]);

  //       const block2Resp = await custom.getHeader(block2Hash);
  //       const latestBlocks = await custom.getLatestBlocks();

  //       expect(block2Resp.finalized).to.eq(true);
  //       expect(latestBlocks[0].hash).to.eq(block5Hash);
  //       expect(latestBlocks[1].hash).to.eq(block2Hash);
  //     });
  //     it("should switch a validator set", async () => {
  //       const [block2, block2Encoded, block2Hash] = composeAndSignBlock(
  //         2,
  //         2,
  //         1,
  //         customeBlock1["hash"],
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block3, block3Encoded, block3Hash] = composeAndSignBlock(
  //         3,
  //         3,
  //         2,
  //         block2Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block4, block4Encoded, block4Hash] = composeAndSignBlock(
  //         4,
  //         4,
  //         3,
  //         block3Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block5, block5Encoded, block5Hash] = composeAndSignBlock(
  //         5,
  //         5,
  //         4,
  //         block4Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );

  //       const next = createValidators(3);

  //       const [block6, block6Encoded, block6Hash] = composeAndSignBlock(
  //         6,
  //         6,
  //         5,
  //         block5Hash,
  //         customValidators,
  //         2,
  //         [],
  //         next.map((item) => item.address)
  //       );
  //       const [block7, block7Encoded, block7Hash] = composeAndSignBlock(
  //         7,
  //         7,
  //         6,
  //         block6Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block8, block8Encoded, block8Hash] = composeAndSignBlock(
  //         8,
  //         8,
  //         7,
  //         block7Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block9, block9Encoded, block9Hash] = composeAndSignBlock(
  //         9,
  //         9,
  //         8,
  //         block8Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block10, block10Encoded, block10Hash] = composeAndSignBlock(
  //         10,
  //         10,
  //         9,
  //         block9Hash,
  //         customValidators,
  //         2,
  //         next.map((item) => item.address),
  //         []
  //       );
  //       await custom.receiveHeader([block2Encoded, block3Encoded, block4Encoded]);

  //       await custom.receiveHeader([block5Encoded, block6Encoded, block7Encoded]);

  //       await custom.receiveHeader([
  //         block8Encoded,
  //         block9Encoded,
  //         block10Encoded,
  //       ]);

  //       const block7Resp = await custom.getHeader(block7Hash);

  //       expect(block7Resp.parentHash).to.eq(block6Hash);
  //       expect(block7Resp.number).to.eq(7);
  //       expect(block7Resp.roundNum).to.eq(7);
  //       expect(block7Resp.finalized).to.eq(true);
  //       const latestBlocks = await custom.getLatestBlocks();
  //       expect(latestBlocks[0].hash).to.eq(block10Hash);
  //       expect(latestBlocks[1].hash).to.eq(block7Hash);

  //       const blockHeader7Resp = await custom.getHeaderByNumber(7);

  //       expect(blockHeader7Resp.hash).to.eq(block7Hash);
  //       expect(blockHeader7Resp.number).to.eq(7);

  //       const blockHeader8Resp = await custom.getHeaderByNumber(8);
  //       expect(blockHeader8Resp.hash).to.eq(block8Hash);
  //       expect(blockHeader8Resp.number).to.eq(8);

  //       const currentValidators = await custom.getCurrentValidators();
  //       expect(currentValidators[0]).to.deep.eq(next.map((item) => item.address));
  //     });

  //     it("should penalty validitor verify", async () => {
  //       const [block2, block2Encoded, block2Hash] = composeAndSignBlock(
  //         2,
  //         2,
  //         1,
  //         customeBlock1["hash"],
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block3, block3Encoded, block3Hash] = composeAndSignBlock(
  //         3,
  //         3,
  //         2,
  //         block2Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block4, block4Encoded, block4Hash] = composeAndSignBlock(
  //         4,
  //         4,
  //         3,
  //         block3Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block5, block5Encoded, block5Hash] = composeAndSignBlock(
  //         5,
  //         5,
  //         4,
  //         block4Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const next = createValidators(5);
  //       const penalties = [next[0], next[1]];
  //       const actualValidators = [next[2], next[3], next[4]];

  //       const [block6, block6Encoded, block6Hash] = composeAndSignBlock(
  //         6,
  //         6,
  //         5,
  //         block5Hash,
  //         customValidators,
  //         2,
  //         [],
  //         next.map((item) => item.address),
  //         penalties.map((item) => item.address)
  //       );
  //       const [block7, block7Encoded, block7Hash] = composeAndSignBlock(
  //         7,
  //         7,
  //         6,
  //         block6Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block8, block8Encoded, block8Hash] = composeAndSignBlock(
  //         8,
  //         8,
  //         7,
  //         block7Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block9, block9Encoded, block9Hash] = composeAndSignBlock(
  //         9,
  //         9,
  //         8,
  //         block8Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block10, block10Encoded, block10Hash] = composeAndSignBlock(
  //         10,
  //         10,
  //         9,
  //         block9Hash,
  //         customValidators,
  //         2,
  //         actualValidators.map((item) => item.address),
  //         []
  //       );
  //       await custom.receiveHeader([block2Encoded, block3Encoded, block4Encoded]);

  //       await custom.receiveHeader([block5Encoded, block6Encoded, block7Encoded]);

  //       await custom.receiveHeader([
  //         block8Encoded,
  //         block9Encoded,
  //         block10Encoded,
  //       ]);
  //       const currentValidators = await custom.getCurrentValidators();
  //       expect(currentValidators[0]).to.deep.eq(
  //         actualValidators.map((item) => item.address)
  //       );
  //     });
  //     it("should mainnet num submit", async () => {
  //       const [block2, block2Encoded, block2Hash] = composeAndSignBlock(
  //         2,
  //         2,
  //         1,
  //         customeBlock1["hash"],
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block3, block3Encoded, block3Hash] = composeAndSignBlock(
  //         3,
  //         3,
  //         2,
  //         block2Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block4, block4Encoded, block4Hash] = composeAndSignBlock(
  //         4,
  //         4,
  //         3,
  //         block3Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       const [block5, block5Encoded, block5Hash] = composeAndSignBlock(
  //         5,
  //         5,
  //         4,
  //         block4Hash,
  //         customValidators,
  //         2,
  //         [],
  //         []
  //       );
  //       await custom.receiveHeader([block2Encoded, block3Encoded]);
  //       await custom.receiveHeader([block4Encoded, block5Encoded]);

  //       const block2Resp = await custom.getHeader(block2Hash);
  //       expect(block2Resp.number).to.eq(2);
  //       expect(block2Resp.roundNum).to.eq(2);
  //       expect(block2Resp.mainnetNum).to.not.eq(-1);
  //       expect(block2Resp.finalized).to.eq(true);
  //       const block3Resp = await custom.getHeader(block3Hash);
  //       expect(block3Resp.mainnetNum).to.eq(-1);
  //     });
  //   });
});
